#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>
#define n 100

int menu(){
    int resp=0;
    printf("\n\n======================================================\n                  MENU\n======================================================\n");
    printf("1. Soma entre intervalos dos número que não são divisiveis por 13;\n2. Soma de frações;\n3. Jogo de tabuleiro campo minado;\n4. Controle de discos;\n5. Sair.\n");
    scanf("%i", &resp);
    return resp;
}
void soma(){
    int num[2], i, soma=0;
    printf("\nInsira um número:\n");
    scanf("%i", &num[0]);
    printf("\nInsira um número, maior que o informado anteriormente:\n");
    scanf("%i", &num[1]);
    soma=0;
    for(i=num[0]; i<=num[1]; i++){
        if(i%13==0){
        }
        else{
            soma+=i;
        }
    }
    printf("\nA soma dos números no intervalo é %i.\n", soma);
}

void fracao(){
    int N=0, i;
    float S=0, j=0 ;
    printf("\nInsira um número:\n");
    scanf("%i", &N);
    for(i=1; i<=N; i++){
        j=i;
        S+= 1/j;
    }
    printf("\nA soma das frações é %.3f.", S);
}

void bomba(){
    srand(time(NULL));
    int N=0, i, j;
    printf("\nInsira o número de células presentes na tabela:\n");
    scanf("%i", &N);
    int m[5][5]={0}, bombavizinha[5][5]={0};
    printf("\nPosições das bombas:\n");
    for(i=0; i<N; i++){
        for(j=0; j<N; j++){
            m[i][j]=rand()%2;
            printf("%i  ", m[i][j]);
        }
        printf("\n");
    }
    printf("\nDe acordo com o número de bombas vizinhas temos uma matriz com o número das mesmas por cada posição:\n");
    for(i=0; i<N; i++){
        for(j=0; j<N; j++){
            if(i>0 && j>0){
            if(m[i-1][j-1]==1){
                bombavizinha[i][j]++;
            }
            }
            if(i>0){
            if(m[i-1][j]==1){
                bombavizinha[i][j]++;
            }
            }
            if(i>0 && j<N-1){
            if(m[i-1][j+1]==1){
                bombavizinha[i][j]++;
            }
            }
            if(j>0){
            if(m[i][j-1]==1){
                bombavizinha[i][j]++;
            }
            }
            if(i<N-1 && j>0){
            if(m[i+1][j-1]==1){
                bombavizinha[i][j]++;
            }
            }
            if(i<N-1){
            if(m[i+1][j]==1){
                bombavizinha[i][j]++;
            }
            }
            if(j<N-1){
            if(m[i][j+1]==1){
                bombavizinha[i][j]++;
            }
            }
            if(i<N-1 && j<N-1){
            if(m[i+1][j+1]==1){
                bombavizinha[i][j]++;
            }
            }
            printf("%i  ", bombavizinha[i][j]);
        }
        printf("\n");
    }
}

typedef struct{
        char tipo[10], nome_banda[50], nome_disco[50];
        float preco;
        int ano, qtd_cancoes, nota;
    }dados;

dados cadastro(){
        dados D;
        printf("\nInsira o tipo do disco: (CD, DVD, VINIL)\n");
        __fpurge(stdin);
        gets(D.tipo);
        printf("\nInsira o nome da banda ou artista:\n");
        __fpurge(stdin);
        gets(D.nome_banda);
        printf("\nInsira o preço de compra do disco:\n");
        scanf("%f", &D.preco);
        printf("\nInsira o ano em que o disco foi lançado:\n");
        scanf("%i", &D.ano);
        printf("\nInsira o nome do disco:\n");
        __fpurge(stdin);
        gets(D.nome_disco);
        printf("\nInsira a quantidade de canções no disco:\n");
        scanf("%i", &D.qtd_cancoes);
        printf("\nEscolha uma nota de 0 a 10 pro disco:\n");
        scanf("%i", &D.nota);
    return D;
}

void pesquisa (dados import[], int i){
    char procura[50];
    int flag=0;
    printf("\nInsira o nome do artista ou banda que você procura:\n");
        __fpurge(stdin);
        gets(procura);
        flag=0;
        for(int j=0; j<i; j++){
            if(strcmp(procura, import[j].nome_banda)==0){
                  flag++;
                  printf("\nO disco %s %s da banda %s, com preço de R$%.2f , lançado em %i, contém %i canções e está avaliado em %i pontos.\n", import[j].tipo, import[j].nome_disco, import[j].nome_banda, import[j].preco, import[j].ano, import[j].qtd_cancoes, import[j].nota);
                  break;
            }
        }
        if(flag==0){
            printf("\nNão há discos desse artista ou banda.\n");
        }
}
void gasto(dados import[], int i){
    float gastos[3]={0};
    for(int j=0; j<i; j++){
            if(strcmp(import[j].tipo, "CD")==0){
                gastos[0]+=import[j].preco;
            }
            if(strcmp(import[j].tipo, "DVD")==0){
                gastos[1]+=import[j].preco;
            }
            if(strcmp(import[j].tipo, "Vinil")==0){
                gastos[2]+=import[j].preco;
            }
        }
        printf("\nForam gastos em discos do tipo CD R$%.2f.\n", gastos[0]);
        printf("\nForam gastos em discos do tipo DVD R$%.2f.\n", gastos[1]);
        printf("\nForam gastos em discos do tipo Vinil R$%.2f.\n", gastos[2]);
}
void antes(dados import[], int i){
        printf("\nA seguir temos uma lista dos discos lançados antes de 2006:\n");
        for(int j=0; j<i; j++){
            if(import[j].ano<2006){
                printf("\nO disco %s do artista/banda %s.\n", import[j].nome_disco, import[j].nome_banda);
            }
        }
}
void recomenda(dados import[], int i){
    int n_cancoes=0, nota_cancoes=0, flag=0;
        printf("\nInsira o número de canções que você gostaria que o disco tivesse:\n");
        scanf("%i", &n_cancoes);
        printf("\nInsira a nota mínima a qual você gostaria que o disco tivesse:\n");
        scanf("%i", &nota_cancoes);
        printf("\n\nAs opções de discos recomedadas são:\n");
        for(int j=0; j<i; j++){
            if(n_cancoes==import[j].qtd_cancoes && nota_cancoes<=import[j].nota){
                printf("\nO disco %s %s da banda %s, com preço de R$%.2f , lançado em %i, contém %i canções e está avaliado em %i pontos.\n", import[j].tipo, import[j].nome_disco, import[j].nome_banda, import[j].preco, import[j].ano, import[j].qtd_cancoes, import[j].nota);
                flag++;
            }
        }
        if(flag==0){
            printf("\nExigência muito alta, mude os parâmetros para encontrar um disco.\n");
        }
}
void despedida(){
    printf("\nObrigado por ter usado nosso programa de registro de discos!\n");
}

void discos(){
    dados disco[n];
    int resp=0, i=0, k=0;
    while(resp!=6){
        printf("\n\n\nInsira qual ação você gostaria de realizar de acordo com a tabela a seguir:\n1. Cadastrar um novo disco;\n2. Mostrar todos os dados de um determinado artista ou banda;\n3. Mostrar quanto foi gasto em cada tipo de disco;\n4. Mostrar discos lançados antes de 2006;\n5. Recomendar disco;\n6. Sair.\n");
        scanf("%i", &resp);
        switch(resp){
    case 1:
        disco[i]=cadastro();
        i++;
        break;
    case 2:
        pesquisa(disco, i);
        break;
    case 3:
        gasto(disco, i);
        break;
    case 4:
        antes(disco, i);
        break;
    case 5:
        recomenda(disco, i);
        break;
        }
    }
        despedida();
}

void despedida_final(){
    printf("\nObrigado por usar meu programa, HL's agradece a vc!\n\n");
}
int main()
{
    int resp=0;
    while(resp!=5){
        resp=menu();
        switch(resp){
    case 1:
        soma();
        break;
    case 2:
        fracao();
        break;
    case 3:
        bomba();
        break;
    case 4:
        discos();
        break;
    }
    }
    despedida_final();
    return 0;
}
